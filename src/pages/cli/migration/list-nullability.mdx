export const meta = {
  title: `Amplify Codegen Models - List and list components nullability`,
  description: `Generating Amplify models with Amplify CLI 5.1.2`,
};

### **What is changing?**

Amplify CLI 5.1.2 has updated the codegen process to correctly set the optionality for types in models.

_Schema example_

```
type ListStringContainer @model {
  requiredElementRequiredList: [String!]!
  requiredElementOptionalList: [String!]
  optionalElementRequiredList: [String]!
  optionalElementOptionalList: [String]
}
```

In this example, there are four fields with different combinations of optionality:

- `requiredElementRequiredList` - the list itself is required. Elements it contains must be non-null. Empty lists can only be represented as an empty array.
- `requiredElementOptionalList` - the list itself is optional. If present, elements it contains must be non-null. Empty lists could be represented as either an empty array or a null field.
- `optionalElementRequiredList` - the list itself is required. If present, elements it contains may be null.
- `optionalElementOptionalList` - the list itself is optional. If present, elements it contains may be null.

> The list component in this example is a String type, however, this applies for other types as well such as Int, Bool, and embedded types that you define yourself.

### **Why are we introducing this change?**

This is to align the optionality of the generated Swift models as closely as possible to the type defined in the schema.

### **Who is impacted?**

### **When do I have to upgrade?**

This is behind a feature flag in Amplify CLI 5.1.2 and will be deprecated by November 1st, 2021. Developers with existing apps should upgrade to the latest CLI, set the feature flag, and update their app code or their schema (see recommendations following) to account for the change in optionality of the types. Developers building a new app will automatically generate code with the latest changes and no action is required.

### **Where do I make these changes?**

1. Update Amplify CLI to the latest version

```
amplify upgrade
```

2. The version should be at least 5.1.2

```
amplify --v # at least 5.1.2
```

3. If building an existing app, set the feature flag `handleListNullabilityTransparently` to `true` in `cli.json` at the amplify project root.

4. Run `amplify codegen models` to generate the latest models.

5. Open the App and make sure the app compiles with the latest generated models. Depending on your schema, you may be in the following scenarios.
